# Инструкция как работать с Git и репозиториями

## Что такое Git

Git - это консольная утилита, для отслеживания и ведения истории изменения файлов, в вашем проекте. Чаще всего его используют для кода, но можно и для других файлов. Например, для картинок - полезно для дизайнеров.

С помощью Git-a можно откатить свой проект до более старой версии, сравнивать, анализировать или сливать свои изменения в репозиторий.

## Что такое репозиторий

Репозиторием называют хранилище вашего кода и историю его изменений. Git работает локально и все ваши репозитории хранятся в определенных папках на жестком диске.

Так же ваши репозитории можно хранить и в интернете. Обычно для этого используют три сервиса:

* GitHub
* Bitbucket
* GitLab

## Команды работы с папками через консоль

    cd d:\Git <=> переход в папку
    cd .. <=> перход в папку на уровень выше
    cd ../.. <=> переход на два уровня выше
    pwd d:\Git <=> показать текущую папку
    ls <=> показывает файлы в папке
    ls -a <=> показывает скрытые элементы
    mkdir TestDir <=> создание директории (папки), TestDir - название дириктории
    touch file.txt / new-item file.txt <=> создание файла
    cp fail.txt fail_copy.txt <=> копирование файла
    mv fial.txt fail_original.txt <=> переименование файла 
    git rm name.md <=> отключить отслеживание файла
    echo "Hello" <=> вывод текста в терменале
    echo "Hello" > fail_oroginal.txt <=> вывод текста в файл
    cat fail_original.txt <=> просмотр содержимого файла
    rm test_original.txt <=> безвозвратное удаление
    rm -R TestDir <=> удаление дириктории, TestDir - название дириктории

## Запрос версии Git

    git --version 

## Ваш идентификатор

**Регистрация имени в системе Git:**

    git config --global user.name "<ваше_имя>"

**Регистрация почты в системе Git:**

    git config --global user.email "<адрес_почты@email.com>"

**Включает подсветку в терминале:**

    git config --global color.ui auto

*Передача параметра --global позволяет сделать эти настройки всего один раз.*

## Просмотр конфигураций

    git config --list

## Получение справочной информации

    git help <команда>

## Проверка подключения (фиксации) папки к Git

    git status

Если в ответ вы увидите ошибку:

    fatal: not a git repository (or any of the parent directories): .git

Значит, в терминале вызываете команду не из репозитория, а из обычной папки. Если увидели что-то другое, то вы находитесь в репозитории или внутри одной из папок, которая находится в нем.

**Важно! Репозиторий отслеживает изменения во всех вложенных в него папках.**

*Если сделать репозиторием корневую папку на диске C (не делать этого!), то весь диск станет репозиторием и Git будет отслеживать все изменения на этом диске.*

## Что делать, если все вокруг стало репозиторием

**Проверка** Создаем новую пустую папку, например на рабочем столе, и в терминале вызовите «git status» в этой папке.

    «fatal: not a git repository …»

Если видим то радуемся. Все порядке.

Если же видим что-то другое, значит, вновь созданная папка является частью какого-то другого репозитория.

**Важно:** *мы только что создали новую папку и внутри нее никаких команд кроме «git status» не вызывали, то есть мы не создали сейчас новый репозиторий, но Git при этом не говорит нам, что это **«not a git repository»**. Это может быть только в том случае, если эту новую папку создали уже внутри другого репозитория, то есть чуть раньше сделали репозиторием рабочий стол или даже весь диск C.*

Как лечить: нужно найти репозиторий, который создали по ошибке и **"удоляем папку .git"**.

Если вы работаете на Windows, включите отображение скрытых файлов и папок, так как папка .git скрытая. Далее начинаем подниматься по иерархии папок вверх и искать в них папки «.git». Например, если вы создали папку по адресу **«C:\Users\User\Pictures\ControlCenter\Scan»**, то сначала проверяете папку Scan, потом проверяете папку ControlCenter, потом Pictures и так далее, пока не найдете скрытую папку .git. Когда нашли и удалили, проводим проверку из начала этого пункта заново.

## Создание репозитория в требуемой папке

    git init

## Подключение удаленного репозитория

    git remote add origin https://github.com/vxnaotsugu/(название_репозитория)

Проверка

    git remote -v (должно высветиться два репозитория "fetch" и "push")

## Загрузка репозитория из GitHub на свой ПК

Для загрузки файла с GitHub используем команду **git clon** далее вставляем ссылку на репозиторий, ссылку берем со вкладки **code** принадлежащей требуему репозиторию

    git clone https://github.com/vxnaotsugu/Cod.git

**Важно!** Прежде чем вносить изменения, нужно создать новую ветку!

**Важно!** Не нужно пользоваться командой **«git init»**, команда **clone** не только скачивает файлы из интернета, но и инициализирует репозиторий в скачанной папке.

**Важно!** Не нужно создавать репозиторий внутри репозитория. Прежде чем вызывать команды «git init» или «git clone», сначала убедитесь, что вы точно не внутри репозитория. Вызовите **«git status»** и убедитесь, что вы находитесь в папке, а не в репозитории. Если **«git status»** выдал ошибку:

    fatal: not a git repository (or any of the parent directories): .git

 Значит, вы в этой папке можете воспользоваться одним из способов создания репозитория. Либо **«git init»**, либо **«git clone»**, но не обоими одновременно.

**Важно!** Не вызывать **«git init»** и потом **«git clone»** тем самым нарушается правило не создавать репозиторий внутри репозитория.

## Скачивание репозитория из GitHub с уже подключенным репозиторием

    git pull

Команда позволяет скачать все из текущего репозитория и автоматически сделать merge с нашей версией

## Загрузка на GitHub

Команда позволяет отправить нашу версию репозитория на внешний репозиторий.

    git push
    git push -u origin master

**Внимание!** ТРЕБУЕТ АВТОРИЗАЦИИ на внешнем репозитории

Если нужно загрузить ветку

    git push --set-upstream origin branch <=> где branch - это имя ветки

## Первая фиксация изменений и дальнешее сохранения

Чтобы начать управление версиями существующих файлов указываем файлы, за которыми должна следить система, и выполняем первую фиксацию изменений. Для этого используем команды:

**Добавить файл в реестр:**

    git add name.txt

**Добавить все файлы в реестр:**

    git add .

**Отмена отслеживания файла из реестра:**

    git rm --cached fail.txt <=> fiel.txt - название файла

**Сохранение изменений:**

    git commit -m "комментарий к изменениям (eng)"

***Упрощение!*** Сразу добавляем в реестр и вносим коментарий:

    git commit -a -m "коментарий (eng)"

**Внимание!** В том случае когда была введена команда **«git commit»** без "название commit" git попросит ввести этот в консоли.  Что нужно сделать?

Нажимаем SHIFT+I (или прото I) => вводим комментарий (без кавычек и прочего) => ESC => : (не на цифрах) => wq => ENTER

## Отмена *commit* и возврат к предыдущему коммиту

    git reset №commit

## Создание нового *commit* с отменой прошлого *commit*

    git revert №commit <=> №commit - тот commit который нужно удалить 

**Внимание!** Удалится comit и все то что было все в нем сделанно!

## Сохранение пустых директорий

Нужно создать файл **.gitkeep** в нужной директории

## Игнорирование директорий

Нужно создать файл **.gitignore** в нужной директории и туда записать названия этих директорий

## Отображение всех операций

    git reflog

## Отображение сделанных сохранений

    git log

**Упрощеное отображение:**

    git log --oneline

    Head -> <=> точка где сейчас находимся

Навигация в меню log

    q <=> выйти и get log
    w <=> перемещение вверх
    e <=> перемещение вниз

## Загрузка сохранения

    git checkout “вводим номер checkout (достаточно первых 4х символов)”

Ререход к последнему сохранению:

    git checkout master

## Просмотр индексированных и неиндексированных изменений (разница то что сохранено и то что сделано)

    git diff

Показывает:

* что вы отредактировали (но пока не проиндексировали)

* что из проиндексированного готово к фиксации?

## Вывод списка веток

    git branch

## Создание ветки

    git branch name_branch <=> name_branch - название новой ветки

**Внимание!** Нужно находиться в ветке от которой нужно сделать ответвление.

Для создания новой ветки находяс в другой ветке используем команду:

    git branch name_branch master <=> master - название ветки от которой создаться новая ветка

Для создания и перехода в новую ветку используем команду:

    git ckeckout -b new_branch

## Переименовать ветку

    git branch -m name_branch

## Удаление ветки

    git branch -d name_branch

**Внимание!** Нужно находиться в той ветке, которую требуется удалить.

## Переход между ветками

    git ckeckout name_branch

## Отображения веток с помощью графика

    git log --oneline --graph --all

## Сливание текущей ветки с ответвлением

    git merge name_branch

**Внимание!** Нужно находиться в ветке к которой хотим присоединить другую ветку.
